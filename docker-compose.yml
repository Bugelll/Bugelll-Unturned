services:
  Bugelll-Unturned-1:
    image: emqo/bugelll-unturned:latest
    container_name: Bugelll-Unturned-1
    restart: unless-stopped
    ports:
      - "34567:34567/udp"
      - "34568:34568/udp"
    volumes:
      - ./UnturnedData1:/home/steam/Unturned
    environment:
      - SERVER_TYPE=rm4
      - SERVER_NAME=Bugelll-Unturned-1
      - GAME_DIR=/home/steam/Unturned
      - STEAMCMD_DIR=/home/steam/steamcmd
      - TZ=Asia/Shanghai
    stdin_open: true
    tty: true
    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 4G
        reservations:
          cpus: '0.5'
          memory: 1G
    # Logging configuration
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    # Security options
    security_opt:
      - no-new-privileges:true
    read_only: false
    tmpfs:
      - /tmp
      - /run
    networks:
      unturned-net:
        ipv4_address: 172.20.0.2

  Bugelll-Unturned-2:
    image: emqo/bugelll-unturned:latest
    container_name: Bugelll-Unturned-2
    restart: unless-stopped
    ports:
      - "35678:35678/udp"
      - "35679:35679/udp"
    volumes:
      - ./UnturnedData2:/home/steam/Unturned
    environment:
      - SERVER_TYPE=rm4
      - SERVER_NAME=Bugelll-Unturned-2
      - GAME_DIR=/home/steam/Unturned
      - STEAMCMD_DIR=/home/steam/steamcmd
      - TZ=Asia/Shanghai
    stdin_open: true
    tty: true
    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 4G
        reservations:
          cpus: '0.5'
          memory: 1G
    # Logging configuration
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    # Security options
    security_opt:
      - no-new-privileges:true
    read_only: false
    tmpfs:
      - /tmp
      - /run
    networks:
      unturned-net:
        ipv4_address: 172.20.0.3

networks:
  unturned-net:
    driver: bridge
    ipam:
      config:
        - subnet: 172.20.0.0/16
          gateway: 172.20.0.1

